<!DOCTYPE html>
<html lang="en">
<head>
	<title>Outdoor 3D Scene</title>
	<style>
		body {
			margin: 0;
			background-color: rgb(237, 215, 247);
		}
		canvas {
			width: 100%;
			height: 100%;
		}
	</style>
</head>
<body>
	<h2 class="name">Talon Baker</h2>
	<div id="container"></div>

	<!-- Loading JS -->
	<script src="js/three.js"></script>
	<script src="js/OrbitControls.js"></script>
	<script src="js/KeyboardState.js"></script>
	<script src="js/OBJLoader.js"></script>
	<!-- <script src="js/engine.js"></script> -->
	<script src="js/create-skybox.js"></script>
	
	<!-- Loading Shaders -->
	<script src="shaders/vs-enviromentMap.js"></script>
	<script src="shaders/fs-enviromentMap.js"></script>

	<script src="shaders/vs-skybox.js"></script>
	<script src="shaders/fs-skybox.js"></script>

	<script src="shaders/vs-heightTextureMap.js"></script>
	<script src="shaders/fs-heightTextureMap.js"></script>

	<!-- THREEjs -->
	<script>

		var container, renderer, scene, camera, constols;

		var texture1 = new THREE.TextureLoader().load( 'assets/map.png' );
		var texture2 = new THREE.TextureLoader().load( 'assets/grass.png' );
		var texture3 = new THREE.TextureLoader().load( 'assets/snow.jpg' );
		var texture4 = new THREE.TextureLoader().load( 'assets/hill.jpg' );

		init();
		animate();

		function init() {
			container = document.getElementById( 'container' );

			// defining the renderer
			renderer = new THREE.WebGLRenderer();
			renderer.setClearColor( 0x999999 );
			renderer.setPixelRatio( window.devicePixelRatio );
			renderer.setSize( window.innerWidth, window.innerHeight );
			container.appendChild( renderer.domElement );

			// container.appendChild( renderer.domElement );

			// defining the scene
			scene = new THREE.Scene();

			// defining the camrea
			camera = new THREE.PerspectiveCamera(50, window.innerWidth/window.innerHeight, 0.1, 1000);

			// orbit controls for mouse movement of the scene
			controls = new THREE.OrbitControls( camera );

			camera.position.set( 2, 3, -7);
			controls.update();

			// creating skybox
			var skybox = createSkybox( 1000, [
		        'assets/skybox_px.png',
		        'assets/skybox_nx.png',
		        'assets/skybox_py.png',
		        'assets/skybox_ny.png',
		        'assets/skybox_pz.png',
		        'assets/skybox_nz.png',
		    ] );

			// creating plane
			var PlaneGeometry = new THREE.PlaneGeometry( 5, 5, 300, 300 );

			var planeUniform =  {
				displaceAmt: { type: "f", value: 1.0       },
				tPic:        { type: "t", value: texture1  },
				tGrass:      { type: "t", value: texture2  },
				tSnow:       { type: "t", value: texture3  },
				tHill:       { type: "t", value: texture4  },
			};

			var planeMaterial = new THREE.RawShaderMaterial( {
				uniforms:       planeUniform,
				vertexShader:   vs_heightTextureMap,
				fragmentShader: fs_heightTextureMap,
			} );

			var plane = new THREE.Mesh( PlaneGeometry, planeMaterial );
			plane.material.side = THREE.DoubleSide;
			plane.rotateX( -Math.PI/2 );
			plane.rotateZ( Math.PI );

			// creating carrot object
			function loadObjects() {
				var loader = new THREE.OBJLoader();
				loader.load( 'assets/carrot.obj', function ( carrot ) {
					var s = 2;
					carrot.scale.set( s, s, s );
					carrot.position.x += 0.5;
					// carrot.position.y -= 0.5;
					carrot.rotateX(Math.PI/4);
					
					// adding carrot object to the scene
					scene.add( carrot );
				} );
			}



			// adding the objects to the scene
		    scene.add( skybox );
		    scene.add( plane );

		}// end - init()

	    function onWindowResize( event ) {
			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();
			renderer.setSize( window.innerWidth, window.innerHeight );
	    }

	    function animate() {
			requestAnimationFrame( animate );
			controls.update();
			renderer.render( scene, camera );
	    }
	</script>
</body>
</html>