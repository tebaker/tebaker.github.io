
<!DOCTYPE html>
<html lang="en">
<head>
  <head>
    <title>Outdoor 3D Scene</title>
    <style>
      body {
        margin: 0;
        background-color: rgb(237, 215, 247);
      }
      canvas { width: 100%; height: 100% }
    </style>
  </head>
<body>
  <h2 class="name">Talon Baker</h2>
  <div id="container"></div>

  <script src="js/three.js"></script>
  <script src="js/OrbitControls.js"></script>
  <script src="js/OBJLoader.js"></script>

  <script>
    var container;

    var camera, scene, renderer;

    var vs = document.getElementById( 'vertexShader' ).textContent;
    var fs = document.getElementById( 'fragmentShader' ).textContent;

    var texture1 = new THREE.TextureLoader().load( 'assets/map.png' );
    var texture2 = new THREE.TextureLoader().load( 'assets/grass.png' );
    var texture3 = new THREE.TextureLoader().load( 'assets/snow.jpg' );
    var texture4 = new THREE.TextureLoader().load( 'assets/hill.jpg' );

    init();
    animate();

    function init() {
      container = document.getElementById( 'container' );

      camera = new THREE.PerspectiveCamera( 50.0, window.innerWidth / window.innerHeight, 0.1, 50 );

      //adds a default mouse listener to control the camera rotation and zoom
      var controls = new THREE.OrbitControls( camera );
      camera.position.z = 5;
      controls.update();

      scene = new THREE.Scene();

      // geometry

      var geometry = new THREE.PlaneGeometry( 5, 5, 300, 300 );

      // material

      var uniforms1 =  {
        displaceAmt: { type: "f", value: 0.0 },
        tPic: { type: "t", value: texture1  },
        tGrass: { type: "t", value: texture2  },
        tSnow: { type: "t", value: texture3  },
        tHill: { type: "t", value: texture4  },
      };

      var material = new THREE.RawShaderMaterial( {

        uniforms: uniforms1,
        vertexShader: vs,
        fragmentShader: fs,

      } );

      var ground = new THREE.Mesh( geometry, material );
      ground.material.side = THREE.DoubleSide;
      ground.rotateX(-Math.PI/3);
      scene.add( ground );

      renderer = new THREE.WebGLRenderer();
      renderer.setClearColor( 0x999999 );
      renderer.setPixelRatio( window.devicePixelRatio );
      renderer.setSize( window.innerWidth, window.innerHeight );
      container.appendChild( renderer.domElement );

      window.addEventListener( 'resize', onWindowResize, false );

      loadObjects();

    }// end - init()

    function loadObjects() {
      var loader = new THREE.OBJLoader();
      loader.load( 'assets/carrot.obj', function ( object ) {
        var s = 2;
        object.scale.set( s, s, s );
        object.position.x += 0.5;
        // object.position.y -= 0.5;
        object.rotateX(Math.PI/4);

        var carrot = object;
        scene.add( carrot );
      } );
    }

    function onWindowResize( event ) {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();

      renderer.setSize( window.innerWidth, window.innerHeight );
    }

    function animate() {
      requestAnimationFrame( animate );
      render();
    }

    function render() {
      var time = performance.now();

      var object0 = scene.children[ 0 ];
        //  object0.material.uniforms.displaceAmt.value = 0.5 * (1.0 + Math.sin(time * 0.001)); 
        
        object0.material.uniforms.displaceAmt.value = 1.0;

        renderer.render( scene, camera );
    }
  </script>
</body>
</html>

